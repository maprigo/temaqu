<script>
(function(){
  // --------- COSTOS BASE ---------
  const FLIGHTS = 3862;        // USD â€“ vuelos BsAs â‡„ Londres
  const LONDON = 1190;         // 7 dÃ­as comidas + transporte + ocio
  const BASE_ROUTE = 1440;     // 12 dÃ­as comidas + ocio (sin transporte)

  // --------- MODOS DE VIAJE ---------
  const modes = {
    auto: {
      label: "ðŸš— Solo auto",
      desc: "Todo el tramo continental en SUV. MÃ¡xima flexibilidad, muy cÃ³modo con bebÃ©, pero cuidado con estacionamientos.",
      routeTransport: 1150, // total 12 dÃ­as
      note: "Viaje completo â‰ˆ 7.6k USD. Ideal si quieren total independencia."
    },
    hibrido: {
      label: "ðŸ” HÃ­brido (Eurostar + auto)",
      desc: "Cruce Londresâ€“Bruselas en Eurostar y luego SUV para la ruta. La opciÃ³n mÃ¡s equilibrada, cÃ³moda y econÃ³mica.",
      routeTransport: 950,
      note: "Viaje completo â‰ˆ 7.4k USD. RECOMENDADO: menos estrÃ©s, mÃ¡s rÃ¡pido, mejor con bebÃ©."
    },
    trenes: {
      label: "ðŸš† Solo trenes",
      desc: "Todo en trenes europeos. Muy cÃ³modo pero un poco mÃ¡s caro y mÃ¡s transbordos con cochecito.",
      routeTransport: 1300,
      note: "Viaje completo â‰ˆ 7.8k USD. Buen confort, pero menos flexible."
    }
  };

  // --------- DÃAS DEL VIAJE ---------
  const days = [
    {day:1, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},
    {day:2, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},
    {day:3, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},
    {day:4, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},
    {day:5, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},
    {day:6, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},
    {day:7, city:"Londres", type:"london", base:170, km:null, transportLabel:"Metro / a pie"},

    {day:8, city:"Londres â†’ Bruselas", type:"route", base:120, km:350, transportLabel:"Cruce a Bruselas"},
    {day:9, city:"Brujas (desde Bruselas)", type:"route", base:120, km:200, transportLabel:"Bruselas â†” Brujas"},
    {day:10, city:"Gante (desde Bruselas)", type:"route", base:120, km:120, transportLabel:"Bruselas â†” Gante"},
    {day:11, city:"Amberes", type:"route", base:120, km:120, transportLabel:"Bruselas â†’ Amberes"},
    {day:12, city:"Namur", type:"route", base:120, km:70, transportLabel:"Amberes â†’ Namur"},
    {day:13, city:"Dinant", type:"route", base:120, km:60, transportLabel:"Namur â†’ Dinant"},
    {day:14, city:"ParÃ­s (llegada)", type:"route", base:120, km:300, transportLabel:"Dinant/Namur â†’ ParÃ­s"},
    {day:15, city:"ParÃ­s (museos)", type:"route", base:120, km:40, transportLabel:"Desplazamientos urbanos"},
    {day:16, city:"Haarlem", type:"route", base:120, km:500, transportLabel:"ParÃ­s â†’ Holanda"},
    {day:17, city:"Ãmsterdam", type:"route", base:120, km:30, transportLabel:"Haarlem â†’ Ãmsterdam"},
    {day:18, city:"Den Bosch", type:"route", base:120, km:100, transportLabel:"Ãmsterdam â†’ Den Bosch"},
    {day:19, city:"Regreso a Londres / aeropuerto", type:"route", base:120, km:350, transportLabel:"Holanda â†’ Bruselas / aeropuerto"}
  ];

  // --------- SELECTORES DEL DOM ---------
  const tbody = document.getElementById("tbodyDays");
  const modeDesc = document.getElementById("modeDesc");
  const sumFlightsEl = document.getElementById("sumFlights");
  const sumLondonEl = document.getElementById("sumLondon");
  const sumRouteEl = document.getElementById("sumRoute");
  const sumTotalEl = document.getElementById("sumTotal");
  const modeNoteEl = document.getElementById("modeNote");
  const pillModeEl = document.getElementById("pillMode");

  // --------- FORMATEADOR USD ---------
  function fmt(x){
    return "$" + x.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",");
  }

  // --------- FUNCIÃ“N PRINCIPAL DE RENDER ---------
  function render(modeKey){
    const mode = modes[modeKey];
    const perDayRouteTransport = mode.routeTransport / 12; // 12 dÃ­as de ruta

    // --- RESUMEN GLOBAL ---
    const routeTotal = BASE_ROUTE + mode.routeTransport;
    const totalTrip = FLIGHTS + LONDON + routeTotal;

    // Insertar resumen
    sumFlightsEl.textContent = fmt(FLIGHTS);
    sumLondonEl.textContent = fmt(LONDON);
    sumRouteEl.textContent = fmt(routeTotal);
    sumTotalEl.textContent = fmt(totalTrip);

    modeDesc.textContent = mode.desc;
    modeNoteEl.textContent = mode.note;
    pillModeEl.textContent = "Tipo de viaje seleccionado: " + mode.label;

    // --- TABLA DÃA POR DÃA ---
    tbody.innerHTML = "";
    days.forEach(d => {
      const tr = document.createElement("tr");
      tr.className = d.type === "london" ? "london" : "route";

      let tTransport = 0;

      if(d.type === "london"){
        tTransport = 30;   // transporte urbano Londres
      } else {
        tTransport = perDayRouteTransport;
      }

      const tDay = d.base + tTransport;

      tr.innerHTML = `
        <td class="center">${d.day}</td>
        <td>${d.city}</td>
        <td>${d.type === "london"
            ? '<span class="badge badge-london">Londres</span>'
            : '<span class="badge badge-route">Ruta Europa</span>'}</td>
        <td>${d.km ? d.km + ' km' : 'â€”'}</td>
        <td>${mode.label}</td>
        <td>${fmt(d.base)}</td>
        <td>${fmt(tTransport)}</td>
        <td><strong>${fmt(tDay)}</strong></td>
      `;
      tbody.appendChild(tr);
    });

    // --- ACTUALIZAR ESTADO VISUAL DE BOTONES ---
    document.querySelectorAll(".mode-btn").forEach(btn=>{
      btn.classList.toggle("active", btn.dataset.mode === modeKey);
    });
  }

  // --------- EVENTOS DE BOTONES ---------
  document.querySelectorAll(".mode-btn").forEach(btn=>{
    btn.addEventListener("click",()=>{
      render(btn.dataset.mode);
    });
  });

  // --------- ESTADO INICIAL ---------
  render("hibrido");

})();
</script>
